# ============================================================
# GOOGLE C++ STYLE GUIDE - ENFORCED BY CLANG-TIDY
#
# This codebase is written by an AI coding assistant (Claude).
# There is no human code review. These rules are the ONLY
# guardrails ensuring code quality and consistency. If a rule
# is disabled or weakened, there is NOTHING ELSE stopping bad
# code from landing in main.
#
# RULES FOR THE AI:
# 1. NEVER disable a check to fix a build.
#    Fix the CODE, not the config.
# 2. NEVER add a function/class/variable to an IgnoredRegexp
#    to bypass naming rules. Rename the code instead.
# 3. NEVER weaken a threshold (raise limits, remove prefixes,
#    change Case rules).
# 4. The ONLY valid exceptions are names mandated by the C++
#    standard (listed explicitly below with section refs).
# 5. If you think a rule is wrong, you are wrong. Research
#    the Google C++ Style Guide before touching this file.
# ============================================================
---
Checks: >-
  -*,
  bugprone-*,
  -bugprone-easily-swappable-parameters,
  cppcoreguidelines-avoid-goto,
  cppcoreguidelines-init-variables,
  cppcoreguidelines-slicing,
  misc-redundant-expression,
  misc-unused-parameters,
  modernize-use-auto,
  modernize-use-nullptr,
  modernize-use-override,
  performance-*,
  readability-function-cognitive-complexity,
  readability-function-size,
  readability-identifier-naming,
  readability-redundant-smartptr-get,
  readability-simplify-boolean-expr
HeaderFilterRegex: 'src/.*\.h$'
CheckOptions:
  # -- Function complexity ---------------------------------
  # Google C++ Style: keep functions short and focused.
  # These are hard limits. Do NOT raise them. If a function
  # is too complex, refactor it into smaller functions.
  readability-function-size.NestingThreshold: 4
  readability-function-size.ParameterThreshold: 5
  readability-function-size.StatementThreshold: 50
  readability-function-size.LineThreshold: 200
  readability-function-cognitive-complexity.Threshold: 15

  # -- Naming: types (CamelCase) ---------------------------
  # Google C++ Style: type names are CamelCase - classes,
  # structs, enums, type aliases, typedefs, template params.
  # Do NOT change to lower_case or snake_case.
  readability-identifier-naming.ClassCase: CamelCase
  readability-identifier-naming.StructCase: CamelCase
  # promise_type is MANDATED by the C++23 coroutine standard
  # [coroutine.handle]. The compiler requires this exact
  # struct name. It is NOT our naming choice.
  # Do NOT remove this exception.
  readability-identifier-naming.StructIgnoredRegexp: promise_type
  readability-identifier-naming.EnumCase: CamelCase
  readability-identifier-naming.TypeAliasCase: CamelCase
  readability-identifier-naming.TypedefCase: CamelCase
  readability-identifier-naming.TemplateParameterCase: CamelCase

  # -- Naming: enum constants (kCamelCase) -----------------
  # Google C++ Style: "Enumerators should be named like
  # constants, i.e. kEnumName."
  # Both scoped (enum class) and unscoped enums use the k
  # prefix. Do NOT remove the prefix. Do NOT set the prefix
  # to "" to "fix" build errors - rename the enum values.
  readability-identifier-naming.EnumConstantCase: CamelCase
  readability-identifier-naming.EnumConstantPrefix: k
  readability-identifier-naming.ScopedEnumConstantCase: CamelCase
  readability-identifier-naming.ScopedEnumConstantPrefix: k

  # -- Naming: functions and methods (CamelCase) -----------
  # Google C++ Style: "Regular functions have mixed case ...
  # ordinarily, functions should start with a capital
  # letter", e.g. AddTableEntry(), DeleteUrl().
  # Do NOT change to lower_case or snake_case.
  readability-identifier-naming.FunctionCase: CamelCase
  readability-identifier-naming.MethodCase: CamelCase
  # These names are MANDATED by the C++ standard and cannot
  # be renamed. Do NOT remove these exceptions. Do NOT add
  # project functions to this list to bypass the CamelCase
  # rule - rename them instead.
  #   main              - program entry point [basic.start]
  #   get_return_object - coroutine promise [coroutine.traits]
  #   initial_suspend   - coroutine promise [coroutine.traits]
  #   final_suspend     - coroutine promise [coroutine.traits]
  #   return_void       - coroutine promise [coroutine.traits]
  #   return_value      - coroutine promise [coroutine.traits]
  #   unhandled_exception - coroutine promise [coroutine.traits]
  #   await_ready       - awaitable protocol [expr.await]
  #   await_suspend     - awaitable protocol [expr.await]
  #   await_resume      - awaitable protocol [expr.await]
  readability-identifier-naming.FunctionIgnoredRegexp: 'main|get_return_object|initial_suspend|final_suspend|return_void|return_value|unhandled_exception|await_ready|await_suspend|await_resume'
  # SmallVec methods below are MANDATED by the C++ Container
  # and Range concepts ([container.reqmts], [range.range]).
  # Renaming them would break range-based for loops, STL
  # algorithms, and structured bindings. Do NOT remove them.
  #   push_back - Container [sequence.reqmts]
  #   begin/end - Range [range.access]
  #   size      - Container [container.reqmts]
  #   empty     - Container [container.reqmts]
  #   data      - ContiguousContainer [contiguous.container]
  readability-identifier-naming.MethodIgnoredRegexp: 'get_return_object|initial_suspend|final_suspend|return_void|return_value|unhandled_exception|await_ready|await_suspend|await_resume|push_back|begin|end|size|empty|data'

  # -- Naming: variables and parameters (lower_case) -------
  # Google C++ Style: "Variable names are all lowercase,
  # with underscores between words."
  readability-identifier-naming.VariableCase: lower_case
  readability-identifier-naming.ParameterCase: lower_case

  # -- Naming: class/struct members (lower_case) -----------
  # Google C++ Style: "Data members of classes ... have
  # trailing underscores." Public struct members do NOT
  # get the trailing underscore.
  readability-identifier-naming.PrivateMemberCase: lower_case
  readability-identifier-naming.PrivateMemberSuffix: '_'
  readability-identifier-naming.ProtectedMemberCase: lower_case
  readability-identifier-naming.ProtectedMemberSuffix: '_'
  readability-identifier-naming.PublicMemberCase: lower_case

  # -- Naming: constants (kCamelCase) ----------------------
  # Google C++ Style: "Variables declared constexpr or const,
  # and whose value is fixed for the duration of the program,
  # are named with a leading 'k' followed by mixed case."
  # e.g. kDaysInAWeek, kMaxBlockSize.
  #
  # EVERY constant subcategory must be listed explicitly
  # because clang-tidy does NOT reliably inherit Prefix from
  # the parent Constant category. Do NOT remove any of these.
  # If you remove e.g. ConstexprVariablePrefix, constexpr
  # variables will silently lose the k prefix requirement.
  readability-identifier-naming.ConstantCase: CamelCase
  readability-identifier-naming.ConstantPrefix: k
  readability-identifier-naming.ConstexprVariableCase: CamelCase
  readability-identifier-naming.ConstexprVariablePrefix: k
  readability-identifier-naming.StaticConstantCase: CamelCase
  readability-identifier-naming.StaticConstantPrefix: k
  readability-identifier-naming.ClassConstantCase: CamelCase
  readability-identifier-naming.ClassConstantPrefix: k
  readability-identifier-naming.GlobalConstantCase: CamelCase
  readability-identifier-naming.GlobalConstantPrefix: k
  readability-identifier-naming.LocalConstantCase: CamelCase
  readability-identifier-naming.LocalConstantPrefix: k

  # -- Naming: namespaces (lower_case) --------------------
  # Google C++ Style: "Namespace names are all lower-case,
  # with words separated by underscores."
  readability-identifier-naming.NamespaceCase: lower_case
