include(FetchContent)
FetchContent_Declare(
    googletest
    URL https://github.com/google/googletest/archive/refs/tags/v1.15.2.tar.gz
    URL_HASH SHA256=7b42b4d6ed48810c5362c265a17faebe90dc2373c885e5216439d37927f02926
)
FetchContent_MakeAvailable(googletest)

include(GoogleTest)

function(add_unit_test name)
    add_executable(${name} src/unit/${name}.cpp)
    target_link_libraries(${name} PRIVATE deltahdl_lib GTest::gtest_main)
    gtest_discover_tests(${name})
endfunction()

add_unit_test(test_logic4)
add_unit_test(test_lexer)
add_unit_test(test_lexer_extended)
add_unit_test(test_parser)
add_unit_test(test_parser_clause05)
add_unit_test(test_parser_clause05b)
add_unit_test(test_parser_clause06)
add_unit_test(test_parser_clause06b)
add_unit_test(test_parser_clause06d)
add_unit_test(test_parser_clause07)
add_unit_test(test_process)
add_unit_test(test_scheduler)
add_unit_test(test_aig)
add_unit_test(test_const_eval)
add_unit_test(test_driver_update)
add_unit_test(test_net)
add_unit_test(test_eval)
add_unit_test(test_lowerer)
add_unit_test(test_elaboration)
add_unit_test(test_preprocessor)
add_unit_test(test_vcd)
add_unit_test(test_synth_lower)
add_unit_test(test_aig_opt)
add_unit_test(test_lut_map)
add_unit_test(test_netlist_writer)
add_unit_test(test_adv_sim)
add_unit_test(test_vpi)
add_unit_test(test_vpi_complete)
add_unit_test(test_liberty)
add_unit_test(test_cell_map)
add_unit_test(test_adv_synth)
add_unit_test(test_mem_infer)
add_unit_test(test_sv_callable)
add_unit_test(test_clocking)
add_unit_test(test_assertion)
add_unit_test(test_dpi)
add_unit_test(test_compiled_sim)
add_unit_test(test_mt_sim)
add_unit_test(test_parser_clause09)
add_unit_test(test_parser_clause09b)
add_unit_test(test_parser_clause09c)
add_unit_test(test_parser_clause10)
add_unit_test(test_parser_clause11)
add_unit_test(test_parser_clause12)
add_unit_test(test_parser_clause12b)
add_unit_test(test_parser_clause13)
add_unit_test(test_parser_clause23)
add_unit_test(test_parser_clause23b)
add_unit_test(test_parser_clause25)
add_unit_test(test_parser_clause26)
add_unit_test(test_parser_clause27)
add_unit_test(test_parser_clause20)
add_unit_test(test_parser_clause21)
add_unit_test(test_parser_clause22)
add_unit_test(test_parser_clause28)
add_unit_test(test_parser_clause16)
add_unit_test(test_parser_clause08)
add_unit_test(test_parser_clause08b)
add_unit_test(test_parser_clause18)
add_unit_test(test_parser_clause14)
add_unit_test(test_parser_clause15)
add_unit_test(test_parser_clause17)
add_unit_test(test_parser_clause24)
add_unit_test(test_parser_clause30)
add_unit_test(test_parser_clause33)
add_unit_test(test_parser_clause35)
add_unit_test(test_parser_clause36)
add_unit_test(test_parser_annex_f)
add_unit_test(test_parser_annex_h)
add_unit_test(test_parser_annex_a)
add_unit_test(test_parser_annex_a2)
add_unit_test(test_parser_annex_a22)
add_unit_test(test_parser_annex_a22b)
add_unit_test(test_parser_annex_a23)
add_unit_test(test_parser_annex_a24)
add_unit_test(test_parser_annex_a25)
add_unit_test(test_eval_operators)
add_unit_test(test_eval_operators_xz)
add_unit_test(test_eval_advanced)
add_unit_test(test_functions)
add_unit_test(test_stmt_exec)
add_unit_test(test_systask)
add_unit_test(test_systask_math)
add_unit_test(test_enum_methods)
add_unit_test(test_string_methods)
add_unit_test(test_real_types)
add_unit_test(test_lexical)
add_unit_test(test_ipc_sync)
add_unit_test(test_class_sim)
add_unit_test(test_clocking_sim)
add_unit_test(test_constraint)
add_unit_test(test_sva_engine)
add_unit_test(test_coverage)
add_unit_test(test_checker)
add_unit_test(test_program)
add_unit_test(test_specify)
add_unit_test(test_config)
add_unit_test(test_protected)
add_unit_test(test_dpi_runtime)
add_unit_test(test_api)
add_unit_test(test_stmt_exec_lhs)
add_unit_test(test_parser_clause07b)
add_unit_test(test_parser_clause11b)
add_unit_test(test_parser_clause11c)
add_unit_test(test_parser_clause11d)
add_unit_test(test_udp_sim)
add_unit_test(test_svdpi)
add_unit_test(test_vpi_compat)
add_unit_test(test_sv_vpi_user)
add_unit_test(test_sdf)
add_unit_test(test_aggregate)
add_unit_test(test_sim_clause06)
add_unit_test(test_queue_ref)
add_unit_test(test_parser_let)
add_unit_test(test_switch_processing)
add_unit_test(test_user_defined_nettype)
add_unit_test(test_net_decl)
add_unit_test(test_timing_control)
add_unit_test(test_force_release)
add_unit_test(test_strength_model)
add_unit_test(test_logic_gates)
add_unit_test(test_tristate_gates)
add_unit_test(test_mos_switches)
add_unit_test(test_pull_gates)
add_unit_test(test_gate_decl)
add_unit_test(test_gate_net_delays)
add_unit_test(test_net_strengths)
add_unit_test(test_parser_clause19)
add_unit_test(test_parser_clause29)
add_unit_test(test_parser_clause34)
add_unit_test(test_parser_clause38)
add_unit_test(test_parser_clause39)
add_unit_test(test_parser_clause40)
add_unit_test(test_parser_clause03)
add_unit_test(test_parser_clause04)
add_unit_test(test_parser_clause16b)
add_unit_test(test_parser_clause06c)
add_unit_test(test_parser_clause06j)
add_unit_test(test_parser_clause07c)
add_unit_test(test_parser_clause10b)
add_unit_test(test_parser_clause18b)
add_unit_test(test_parser_clause20b)
add_unit_test(test_parser_clause28b)
add_unit_test(test_sim_clause05)
add_unit_test(test_sim_clause05b)
add_unit_test(test_sim_clause05c)
add_unit_test(test_sim_clause05d)
add_unit_test(test_sim_clause13)
add_unit_test(test_library_text)
add_unit_test(test_source_text)
add_unit_test(test_source_text_b)
add_unit_test(test_source_text_c)
