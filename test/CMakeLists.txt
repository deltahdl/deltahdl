include(FetchContent)
FetchContent_Declare(
    googletest
    URL https://github.com/google/googletest/archive/refs/tags/v1.15.2.tar.gz
    URL_HASH SHA256=7b42b4d6ed48810c5362c265a17faebe90dc2373c885e5216439d37927f02926
)
FetchContent_MakeAvailable(googletest)

include(GoogleTest)

function(add_unit_test name)
    add_executable(${name} unit/${name}.cpp)
    target_link_libraries(${name} PRIVATE deltahdl_lib GTest::gtest_main)
    gtest_discover_tests(${name})
endfunction()

add_unit_test(test_logic4)
add_unit_test(test_lexer)
add_unit_test(test_parser)
add_unit_test(test_parser_section5)
add_unit_test(test_parser_section6)
add_unit_test(test_parser_section7)
add_unit_test(test_process)
add_unit_test(test_scheduler)
add_unit_test(test_aig)
add_unit_test(test_const_eval)
add_unit_test(test_driver_update)
add_unit_test(test_net)
add_unit_test(test_eval)
add_unit_test(test_lowerer)
add_unit_test(test_elaboration)
add_unit_test(test_preprocessor)
add_unit_test(test_vcd)
add_unit_test(test_synth_lower)
add_unit_test(test_aig_opt)
add_unit_test(test_lut_map)
add_unit_test(test_netlist_writer)
add_unit_test(test_adv_sim)
add_unit_test(test_vpi)
add_unit_test(test_vpi_complete)
add_unit_test(test_liberty)
add_unit_test(test_cell_map)
add_unit_test(test_adv_synth)
add_unit_test(test_mem_infer)
add_unit_test(test_sv_callable)
add_unit_test(test_clocking)
add_unit_test(test_assertion)
add_unit_test(test_dpi)
add_unit_test(test_compiled_sim)
add_unit_test(test_mt_sim)
add_unit_test(test_parser_section9)
add_unit_test(test_parser_section10)
add_unit_test(test_parser_section11)
add_unit_test(test_parser_section12)
add_unit_test(test_parser_section13)
add_unit_test(test_parser_section23)
add_unit_test(test_parser_section25)
add_unit_test(test_parser_section26)
add_unit_test(test_parser_section27)
add_unit_test(test_parser_section20)
add_unit_test(test_parser_section28)
add_unit_test(test_parser_section16)
add_unit_test(test_parser_section8)
add_unit_test(test_parser_section18)
add_unit_test(test_parser_section14)
add_unit_test(test_parser_section15)
add_unit_test(test_parser_section17)
add_unit_test(test_parser_section24)
add_unit_test(test_parser_section30)
add_unit_test(test_parser_section33)
add_unit_test(test_parser_section35)
add_unit_test(test_parser_section36)
add_unit_test(test_parser_annex_f)
add_unit_test(test_parser_annex_h)
add_unit_test(test_parser_annex_a)
add_unit_test(test_eval_operators)
add_unit_test(test_functions)
add_unit_test(test_stmt_exec)
add_unit_test(test_systask)
add_unit_test(test_enum_methods)
add_unit_test(test_string_methods)
add_unit_test(test_real_types)
add_unit_test(test_lexical)
add_unit_test(test_ipc_sync)
add_unit_test(test_class_sim)
add_unit_test(test_clocking_sim)
add_unit_test(test_constraint)
add_unit_test(test_sva_engine)
add_unit_test(test_coverage)
add_unit_test(test_checker)
add_unit_test(test_program)
add_unit_test(test_specify)
add_unit_test(test_config)
add_unit_test(test_protected)
add_unit_test(test_dpi_runtime)
add_unit_test(test_api)
add_unit_test(test_stmt_exec_lhs)
add_unit_test(test_parser_section7b)
add_unit_test(test_parser_section11b)
add_unit_test(test_udp_sim)
add_unit_test(test_svdpi)
add_unit_test(test_vpi_compat)
add_unit_test(test_sv_vpi_user)
add_unit_test(test_sdf)
add_unit_test(test_aggregate)
add_unit_test(test_sim_ch6)
